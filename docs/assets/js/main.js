"use strict";const searchButton=document.querySelector(".js-search"),inputSerie=document.querySelector(".js-input"),seriesContainer=document.querySelector(".js-series-container"),seriesFavoriteContainer=document.querySelector(".js-favorites__container"),resetButton=document.querySelector(".js-reset");let series=[],favorites=[];function getFavs(){null!==localStorage.getItem("favorite-serie")&&getInLocalStorage()}function showReset(){favorites!==[]?resetButton.classList.remove("hidden"):resetButton.classList.add("hidden")}function completeUrl(){return"//api.tvmaze.com/search/shows?q="+inputSerie.value.toLowerCase()}function getFromApi(e){let s=completeUrl();fetch(s).then(e=>e.json()).then(e=>{series=e,showSeriesList()}),e.preventDefault()}function showSeriesList(){seriesContainer.innerHTML="";let e="";for(let s of series){let t=s.show.image;t=null===t?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":t.original;e=!0===isFavorite(s)?"favorite-serie":"",seriesContainer.innerHTML+=`<li class="series-container__series js-serie ${e}" id="${s.show.id}"><img class="series-container__series--img" src="${t}"/><h3 class="series-container__series--name">${s.show.name}</h3></li>`}listenSeries()}function handleFavorite(e){const s=parseInt(e.currentTarget.id),t=series.find(e=>e.show.id===s),i=favorites.findIndex(e=>e.show.id===s);-1===i?favorites.push(t):favorites.splice(i,1),setInLocalStorage(),showSeriesList(),showSeriesFavorites()}function isFavorite(e){return void 0!==favorites.find(s=>s.show.id===e.show.id)}function resetFavorites(e){favorites=[],showSeriesFavorites(),e.preventDefault(),showSeriesList(),localStorage.clear()}function showSeriesFavorites(){listenSeries();let e="";for(let s of favorites){let t=s.show.image;t=null===t?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":t.original,e+=`<li class="favorites__container--favseries  js-serie" id="${s.show.id}"><img class="favorites-img"  src="${t}"/><h3 class="favorites-name">${s.show.name}</h3></li><i class="fas fa-trash-alt"></i>`}seriesFavoriteContainer.innerHTML=e,0===favorites.length?seriesFavoriteContainer.classList.add("hidden"):seriesFavoriteContainer.classList.remove("hidden"),setInLocalStorage()}function setInLocalStorage(){const e=JSON.stringify(favorites);localStorage.setItem("favorite-serie",e)}function getInLocalStorage(){favorites=JSON.parse(localStorage.getItem("favorite-serie")),showSeriesFavorites()}function listenSeries(){let e=document.querySelectorAll(".js-serie");for(const s of e)s.addEventListener("click",handleFavorite)}getFavs(),showReset(),searchButton.addEventListener("click",getFromApi),resetButton.addEventListener("click",resetFavorites);